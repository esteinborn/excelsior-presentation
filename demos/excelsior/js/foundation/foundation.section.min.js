(function($,window,document){"use strict";Foundation.libs.section={name:"section",version:"4.1.7",settings:{deep_linking:!1,one_up:!0,section_selector:"[data-section]",region_selector:"section, .section, [data-section-region]",title_selector:".title, [data-section-title]",active_region_selector:"section.active, .section.active, .active[data-section-region]",content_selector:".content, [data-section-content]",nav_selector:'[data-section="vertical-nav"], [data-section="horizontal-nav"]',callback:function(){}},init:function(scope,method,options){var self=this;return Foundation.inherit(this,"throttle data_options position_right offset_right"),"object"==typeof method&&$.extend(!0,self.settings,method),"string"!=typeof method?(this.set_active_from_hash(),this.events(),!0):this[method].call(this,options)},events:function(){var self=this;$(this.scope).on("click.fndtn.section","[data-section] .title, [data-section] [data-section-title]",function(e){var $this=$(this);$this.closest(self.settings.section_selector),self.toggle_active.call(this,e,self),self.reflow()}),$(window).on("resize.fndtn.section",self.throttle(function(){self.resize.call(this)},30)).on("hashchange",function(){self.settings.toggled||(self.set_active_from_hash(),$(this).trigger("resize"))}).trigger("resize"),$(document).on("click.fndtn.section",function(e){1>$(e.target).closest(self.settings.title_selector).length&&$(self.settings.nav_selector).children(self.settings.region_selector).removeClass("active").attr("style","")})},toggle_active:function(e,self){var $this=$(this),self=Foundation.libs.section,region=$this.closest(self.settings.region_selector),content=$this.siblings(self.settings.content_selector),parent=region.parent(),settings=$.extend({},self.settings,self.data_options(parent)),prev_active_section=parent.children(self.settings.active_region_selector);if(self.settings.toggled=!0,!settings.deep_linking&&content.length>0&&e.preventDefault(),region.hasClass("active"))(self.small(parent)||self.is_vertical_nav(parent)||self.is_horizontal_nav(parent)||self.is_accordion(parent))&&(prev_active_section[0]!==region[0]||prev_active_section[0]===region[0]&&!settings.one_up)&&region.removeClass("active").attr("style","");else{var prev_active_section=parent.children(self.settings.active_region_selector),title_height=self.outerHeight(region.children(self.settings.title_selector));(self.small(parent)||settings.one_up)&&(self.small(parent)?prev_active_section.attr("style",""):prev_active_section.attr("style","visibility: hidden; padding-top: "+title_height+"px;")),self.small(parent)?region.attr("style",""):region.css("padding-top",title_height),region.addClass("active"),prev_active_section.length>0&&prev_active_section.removeClass("active").attr("style",""),self.is_vertical_tabs(parent)&&(content.css("display","block"),null!==prev_active_section&&prev_active_section.children(self.settings.content_selector).css("display","none"))}setTimeout(function(){self.settings.toggled=!1},300),settings.callback()},resize:function(){var self=Foundation.libs.section,sections=$(self.settings.section_selector);sections.each(function(){var $this=$(this),active_section=$this.children(self.settings.active_region_selector),settings=$.extend({},self.settings,self.data_options($this));if(active_section.length>1)active_section.not(":first").removeClass("active").attr("style","");else if(1>active_section.length&&!self.is_vertical_nav($this)&&!self.is_horizontal_nav($this)&&!self.is_accordion($this)){var first=$this.children(self.settings.region_selector).first();(settings.one_up||!self.small($this))&&first.addClass("active"),self.small($this)?first.attr("style",""):first.css("padding-top",self.outerHeight(first.children(self.settings.title_selector)))}self.small($this)?active_section.attr("style",""):active_section.css("padding-top",self.outerHeight(active_section.children(self.settings.title_selector))),self.position_titles($this),self.is_horizontal_nav($this)&&!self.small($this)||self.is_vertical_tabs($this)?self.position_content($this):self.position_content($this,!1)})},is_vertical_nav:function(el){return/vertical-nav/i.test(el.data("section"))},is_horizontal_nav:function(el){return/horizontal-nav/i.test(el.data("section"))},is_accordion:function(el){return/accordion/i.test(el.data("section"))},is_horizontal_tabs:function(el){return/^tabs$/i.test(el.data("section"))},is_vertical_tabs:function(el){return/vertical-tabs/i.test(el.data("section"))},set_active_from_hash:function(){var hash=window.location.hash.substring(1),sections=$("[data-section]"),self=this;sections.each(function(){var section=$(this),settings=$.extend({},self.settings,self.data_options(section));if(hash.length>0&&settings.deep_linking){var regions=section.children(self.settings.region_selector).attr("style","").removeClass("active"),hash_regions=regions.map(function(){var content=$(self.settings.content_selector,this),content_slug=content.data("slug");return content_slug===hash?content:undefined});$(hash_regions[0]).parent().addClass("active")}})},position_titles:function(section,off){var self=this,titles=section.children(this.settings.region_selector).map(function(){return $(this).children(self.settings.title_selector)}),previous_width=0,previous_height=0,self=this;"boolean"==typeof off?titles.attr("style",""):titles.each(function(){self.is_vertical_tabs(section)?($(this).css("top",previous_height),previous_height+=self.outerHeight($(this))):(self.rtl?$(this).css("right",previous_width):$(this).css("left",previous_width),previous_width+=self.outerWidth($(this)))})},position_content:function(section,off){var self=this,regions=section.children(self.settings.region_selector),titles=regions.map(function(){return $(this).children(self.settings.title_selector)}),content=regions.map(function(){return $(this).children(self.settings.content_selector)});if("boolean"==typeof off)content.attr("style",""),section.attr("style","");else if(self.is_vertical_tabs(section)&&!self.small(section)){var content_min_height=0,content_min_width=Number.MAX_VALUE,title_width=null;regions.each(function(){var region=$(this),title=region.children(self.settings.title_selector),content=region.children(self.settings.content_selector),content_width=0;title_width=self.outerWidth(title),content_width=self.outerWidth(section)-title_width,content_min_width>content_width&&(content_min_width=content_width),content_min_height+=self.outerHeight(title),$(this).hasClass("active")||content.css("display","none")}),regions.each(function(){var content=$(this).children(self.settings.content_selector);content.css("minHeight",content_min_height),content.css("maxWidth",content_min_width-2)}),section.css("maxWidth",title_width+content_min_width)}else regions.each(function(){var region=$(this),title=region.children(self.settings.title_selector),content=region.children(self.settings.content_selector);self.rtl?content.css({right:self.position_right(title)+1,top:self.outerHeight(title)-2}):content.css({left:title.position().left-1,top:self.outerHeight(title)-2})}),"function"==typeof Zepto?section.height(this.outerHeight($(titles[0]))):section.height(this.outerHeight($(titles[0]))-2)},position_right:function(el){var self=this,section=el.closest(this.settings.section_selector),regions=section.children(this.settings.region_selector),section_width=el.closest(this.settings.section_selector).width(),offset=regions.map(function(){return $(this).children(self.settings.title_selector)}).length;return section_width-el.position().left-el.width()*(el.index()+1)-offset},reflow:function(scope){var scope=scope||document;$(this.settings.section_selector,scope).trigger("resize")},small:function(el){return $.extend({},this.settings,this.data_options(el)),this.is_horizontal_tabs(el)?!1:el&&this.is_accordion(el)?!0:$("html").hasClass("lt-ie9")?!0:$("html").hasClass("ie8compat")?!0:768>$(this.scope).width()},off:function(){$(this.scope).off(".fndtn.section"),$(window).off(".fndtn.section"),$(document).off(".fndtn.section")}}})(Foundation.zj,this,this.document);