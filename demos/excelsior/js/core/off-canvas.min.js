/*! Excelsior Web Framework v0.1.3 | (c) 2013 NYS ITS | https://github.com/nys-its/excelsior.git | License (MIT): https://github.com/nys-its/excelsior/blob/master/license.md */

$(document).ready(function(){$('<div id="menu-controls" class="menu-controls"><span id="sub-menu-title" class="sub-menu-title"></span><a href="#" id="menu-back" class="menu-back icon-left-open">Back</a></div>').prependTo("#global-nav"),$("#global-nav").find('a[href="#"]').each(function(){var $activeMenu,$link=$(this),$subMenu=$link.next("ul");$subMenu.length&&($link.addClass("icon-right-open"),$link.on("click",function(e){var menuCheck;e.preventDefault(),e.stopPropagation(),$activeMenu=$("#mobile-site-menu"),EWF.$body.hasClass($activeMenu.attr("data-active"))||(EWF.$body.addClass($activeMenu.attr("data-active")),$activeMenu.addClass("active")),$subMenu.hasClass("active-menu")?($subMenu.removeClass("active-menu"),EWF.$body.removeClass($activeMenu.attr("data-active")),$("#sub-menu-title").text(""),$link.removeClass("active")):(menuCheck=$(".active-menu"),menuCheck.length&&(menuCheck.removeClass("active-menu"),menuCheck.siblings("a").removeClass("active")),$("#sub-menu-title").text($link.text()),$link.addClass("active"),$subMenu.addClass("active-menu"),EWF.$body.addClass("active-sub-menu"),EWF.$body.on("click",function(){EWF.$body.removeClass("active-sub-menu"),EWF.$body.removeClass("active-site-menu"),$("#sub-menu-title").text(""),$("#global-nav .active").removeClass("active"),$("#global-nav .active-menu").removeClass("active-menu")}))}))}),$("#menu-back").on("click",function(e){var $numberOfSubs;e.preventDefault(),e.stopPropagation(),$numberOfSubs=$(".active-menu"),$numberOfSubs.length>0&&($numberOfSubs.last().removeClass("active-menu"),$numberOfSubs.prev("a").removeClass("active"),0===$(".active-menu").length&&($("#sub-menu-title").text(""),EWF.$body.removeClass("active-sub-menu")))})});